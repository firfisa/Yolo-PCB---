# PCB瑕疵检测需求文档

## 项目介绍

本项目旨在开发一个高性能的PCB（印刷电路板）瑕疵检测系统，使用深度学习目标检测技术。系统将识别和定位PCB图像中的五种瑕疵类型：鼠标咬痕(Mouse_bite)、开路(Open_circuit)、短路(Short)、毛刺(Spur)和杂散铜(Spurious_copper)。目标是通过先进的YOLO模型和全面的评估指标实现最优检测性能。

## 术语表

- **PCB检测系统**: 用于识别PCB瑕疵的完整目标检测系统
- **YOLO模型**: You Only Look Once目标检测神经网络架构
- **mAP**: 平均精度均值，目标检测的主要评估指标
- **IoU**: 交并比，预测框与真实框之间的重叠度量
- **真实标注**: 人工标注的正确瑕疵位置和分类
- **瑕疵类别**: 五种PCB瑕疵类型(Mouse_bite, Open_circuit, Short, Spur, Spurious_copper)
- **训练数据集**: 训练集-PCB_DATASET中提供的训练图像和标注
- **测试数据集**: PCB_瑕疵测试集中提供的测试图像和标注
- **可视化系统**: 用于生成预测结果与真实标注对比图像的组件

## 需求

### 需求1

**用户故事:** 作为质量控制工程师，我希望评估检测模型性能，以便衡量PCB瑕疵检测的有效性。

#### 验收标准

1. 当PCB检测系统处理测试数据集时，系统应当计算IoU阈值为0.5时的mAP
2. 当执行评估时，PCB检测系统应当报告五个瑕疵类别各自的平均精度
3. 当使用未修改的基线YOLO模型时，系统应当实现0.005-0.01之间的mAP作为参考基线
4. 当计算评估指标时，PCB检测系统应当以结构化格式存储结果用于分析
5. 当测试多个IoU阈值时，PCB检测系统应当提供不同严格程度下的全面评估

### 需求2

**用户故事:** 作为机器学习工程师，我希望实施性能改进技术，以便最大化检测精度超越基线性能。

#### 验收标准

1. 当应用数据增强技术时，PCB检测系统应当实现旋转、缩放和颜色变换
2. 当优化模型架构时，系统应当实验不同的YOLO变体(YOLOv5, YOLOv8, YOLOv10)
3. 当执行超参数调优时，PCB检测系统应当优化学习率、批次大小和锚框配置
4. 当实施训练策略时，系统应当使用预训练模型的迁移学习
5. 当应用集成方法时，PCB检测系统应当结合多个模型预测以提高精度

### 需求3

**用户故事:** 作为质量保证专家，我希望可视化检测结果，以便比较模型预测与真实标注。

#### 验收标准

1. 当生成可视化时，可视化系统应当创建左侧为真实标注、右侧为预测结果的并排对比图像
2. 当显示瑕疵标注时，系统应当为每个瑕疵类别使用单字母标签(M, O, S, P, C)以避免文字重叠
3. 当绘制边界框时，可视化系统应当为每种瑕疵类型使用不同颜色以便清晰区分
4. 当标注小瑕疵区域时，系统应当通过紧凑标签最小化文字遮挡
5. 当执行批量可视化时，可视化系统应当为多个测试图像生成对比网格

### 需求4

**用户故事:** 作为数据科学家，我希望预处理和管理数据集，以便确保最优的训练和评估数据质量。

#### 验收标准

1. 当处理训练数据集时，PCB检测系统应当在需要时将标注转换为YOLO格式
2. 当执行数据验证时，系统应当验证标注一致性和图像-标签对应关系
3. 当需要数据集分割时，PCB检测系统应当在各分割中保持类别分布平衡
4. 当实现数据加载时，系统应当高效处理训练和测试数据集
5. 当应用图像预处理时，PCB检测系统应当适当地标准化和调整图像大小

### 需求5

**用户故事:** 作为系统管理员，我希望部署和监控检测系统，以便确保可靠运行和性能跟踪。

#### 验收标准

1. 当启动模型训练时，PCB检测系统应当记录训练进度和验证指标
2. 当执行推理时，系统应当使用可配置的置信度阈值处理图像
3. 当保存结果时，PCB检测系统应当以标准格式(JSON, CSV)导出预测结果
4. 当管理模型检查点时，系统应当自动保存最佳性能的模型权重
5. 当性能监控激活时，PCB检测系统应当跟踪推理速度和资源使用情况

### 需求6

**用户故事:** 作为研究工程师，我希望实现先进的检测技术，以便在小瑕疵检测上达到最先进的性能。

#### 验收标准

1. 当应用多尺度训练时，PCB检测系统应当在各种图像分辨率上训练
2. 当集成注意力机制时，系统应当聚焦于相关的瑕疵区域
3. 当执行损失函数优化时，PCB检测系统应当使用焦点损失或其他技术处理类别不平衡
4. 当应用后处理时，系统应当实现具有最优参数的非极大值抑制
5. 当进行模型架构修改时，PCB检测系统应当实验特征金字塔网络和其他增强技术